<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Valentine For NODI üíó</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Dancing+Script:wght@400;500&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}

/* BACKGROUND */
body{
  margin:0;
  min-height:100vh;
  font-family:Arial,sans-serif;
  text-align:center;
  background:
    linear-gradient(rgba(255,240,245,.75),rgba(255,240,245,.75)),
    url("bg.jpg");
  background-size:cover;
  background-position:center;
  background-attachment:fixed;
  overflow-x:hidden;
}

/* FLOATING HEARTS */
.hearts{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
}
.heart{
  position:absolute;
  color:rgba(255,92,138,.6);
  animation:floatHeart linear infinite;
}
@keyframes floatHeart{
  0%{transform:translateY(-10vh) scale(.8);opacity:0}
  10%{opacity:1}
  100%{transform:translateY(110vh) scale(1.3);opacity:0}
}

/* SECTIONS */
section{
  display:none;
  min-height:100vh;
  padding:40px 20px;
  justify-content:center;
  align-items:center;
  flex-direction:column;
}
section.active{display:flex}

/* TEXT */
h1{
  font-family:'Playfair Display',serif;
  color:#ff5c8a;
  font-size:38px;
}
.subtitle{
  font-size:14px;
  color:#777;
  margin-bottom:20px;
}

/* BUTTON */
button{
  padding:12px 26px;
  border:none;
  border-radius:25px;
  background:#ff5c8a;
  color:white;
  font-size:16px;
  cursor:pointer;
  margin:8px;
}
button:disabled{background:#ffc0d4}

/* START CARD */
.start-card{
  background:rgba(255,255,255,.85);
  padding:45px 35px;
  border-radius:28px;
  box-shadow:0 25px 60px rgba(255,92,138,.25);
}

/* GAME */
.grid{
  display:grid;
  grid-template-columns:repeat(4,70px);
  gap:12px;
  margin:25px 0;
}
.card{
  width:70px;
  height:70px;
  background:#ffb6c1;
  border-radius:12px;
  font-size:28px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.card,
.tap-card {
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  -webkit-user-select: none;
  touch-action: manipulation;
}

.card img {
  pointer-events: none;
  user-select: none;
}
.card.done{background:#ff5c8a}
.card.done{
  border:3px solid #ff5c8a;
  box-shadow:0 0 15px rgba(255,92,138,0.6);
  transform:scale(1.05);
}

/* MUSIC */
.music-card{
  background:rgba(255,255,255,.85);
  padding:30px;
  border-radius:28px;
  width:280px;
}
.cover{
  width:180px;
  height:180px;
  margin:0 auto 15px;
  border-radius:50%;
  overflow:hidden;
  box-shadow:0 0 0 6px #ffd6e5;
}
.cover img{width:100%;height:100%;object-fit:cover}
.cover.playing{animation:spin 6s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.song-name{
  font-family:'Playfair Display',serif;
  color:#ff5c8a;
  margin-bottom:15px;
}

/* SLIDER */
.slider{
  width:260px;
  height:340px;
  position:relative;
  overflow:hidden;
  border-radius:20px;
}
.slide{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:0;
  transition:.6s;
}
.slide.active{opacity:1}

/* WHY YOU MATTER */
.tap-card{
  position:relative;
  overflow:hidden;
  cursor:pointer;
  background:rgba(255,255,255,.85);
  border-radius:20px;
  padding:25px;
  margin-bottom:18px;
}
.card-cover{
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,#ff5c8a,#ff8fb1);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Dancing Script',cursive;
  font-size:22px;
  color:white;
}
.card-content{
  opacity:0;
  transition:.6s;
}
.tap-card.revealed .card-cover{opacity:0}
.tap-card.revealed .card-content{opacity:1}
/* WHY YOU MATTER ‚Äì FIXED LAYOUT */
.matter-wrap{
  max-width:420px;
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:20px;
  margin:20px auto 0;
}

.matter-card{
  height:170px;
  padding:22px;
  border-radius:18px;
  background:rgba(255,255,255,.85);
  box-shadow:
    0 18px 35px rgba(255,92,138,.18),
    inset 0 0 18px rgba(255,255,255,.6);
}

.matter-card h3{
  font-family:'Playfair Display',serif;
  color:#ff5c8a;
  font-size:20px;
  margin-bottom:6px;
}

.matter-card p{
  font-family:'Dancing Script',cursive;
  font-size:17px;
  color:#555;
  line-height:1.4;
}

/* LETTER */
/* ENVELOPE ‚Äì ROMANTIC LOOK */
.envelope{
  width:280px;
  height:180px;
  background:#ffd1e1;
  border-radius:16px;
  position:relative;
  cursor:pointer;
  box-shadow:0 20px 40px rgba(255,92,138,.35);
  overflow:hidden;
}

.envelope::before{
  content:"";
  position:absolute;
  inset:0;
  background:#ff9fbc;
  clip-path:polygon(0 0,100% 0,50% 58%);
  pointer-events:none;
}

.envelope::after{
  content:"";
  position:absolute;
  inset:0;
  border:2px solid rgba(255,255,255,.6);
  border-radius:16px;
  pointer-events:none;
}

.stamp{
  position:absolute;
  bottom:18px;
  left:50%;
  transform:translateX(-50%);
  width:90px;
  height:90px;
  border-radius:50%;
  background:radial-gradient(circle,#ff7aa2,#e63b6f);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:'Dancing Script',cursive;
  font-size:22px;
  color:white;
  box-shadow:0 10px 25px rgba(230,59,111,.6);
  z-index:5;
}
/* LETTER ‚Äì SIZE & READABILITY (CONTENT UNCHANGED) */
.letter{
  display:none;
  max-width:640px;
  background:white;
  padding:40px;
  border-radius:24px;
  margin-top:30px;
  box-shadow:0 25px 50px rgba(0,0,0,.25);
}

.letter h3{
  font-family:'Dancing Script',cursive;
  color:#ff5c8a;
  font-size:28px;
  font-weight:700;
}

.letter p{
  font-family:'Dancing Script',cursive;
  font-size:19px;
  color:#333;
  line-height:1.7;
  text-align:left;
}
/* LOADING SCREEN */
#loader{
  position:fixed;
  inset:0;
  background:
    linear-gradient(rgba(255,240,245,.9),rgba(255,240,245,.9)),
    url("bg.jpg");
  background-size:cover;
  background-position:center;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:9999;
}

.loader-gif{
  width:120px;
  margin-bottom:20px;
}

#loader p{
  font-family:'Playfair Display',serif;
  color:#ff5c8a;
  margin-bottom:20px;
  font-size:18px;
}

/* PROGRESS BAR */
.loading-bar{
  width:260px;
  height:12px;
  background:#ffe0ec;
  border-radius:10px;
  overflow:hidden;
}

.loading-progress{
  width:0%;
  height:100%;
  background:linear-gradient(90deg,#ff5c8a,#ff8fb1);
  border-radius:10px;
  transition:width .3s ease;
}
/* BOUNCE IN ANIMATION */
@keyframes bounceIn {
  0% {
    opacity: 0;
    transform: scale(0.3);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
  }
}

.bounce-in {
  animation: bounceIn 0.9s ease-out forwards;
}
.next-wrap{
  width:100%;
  margin-top:30px;
  text-align:center;
}
.next-wrap{
  width:100%;
  margin-top:30px;
}

.next-wrap button{
  display:block;
  margin:0 auto;
}
.next-btn-wrap{
  width:100%;
  display:flex;
  justify-content:center;
  margin-top:30px;
}
.page-gif{
  position: fixed;
  width: 110px;
  opacity: 0.85;
  z-index: 5;
  pointer-events: none;
}
/* HEART / KISS BURST EFFECT */
.burst {
  position: absolute;
  pointer-events: none;
  z-index: 2; /* sticker er pichone */
}

.burst span {
  position: absolute;
  font-size: 18px;
  animation: burstMove 1s ease-out forwards;
}

@keyframes burstMove {
  from {
    transform: translate(0,0) scale(1);
    opacity: 1;
  }
  to {
    transform: translate(var(--x), var(--y)) scale(0.3);
    opacity: 0;
  }
}
</style>
</head>

<body>
<!-- LOADING SCREEN -->
<div id="loader">
  <img src="loader.gif" alt="Loading" class="loader-gif">
  <p>Loading love for you, Nodi üíó</p>

  <div class="loading-bar">
    <div class="loading-progress" id="loadingProgress"></div>
  </div>
</div>
  
<div class="hearts" id="hearts"></div>

<!-- PAGE 1 -->
<section id="p1">
  <div class="start-card">
   <h1 class="bounce-in">Happy Valentine‚Äôs Day NODI üíñ</h1>
    <p class="subtitle">I made something special for you</p>
    <button onclick="go(2)">Open üíó</button>
  </div>
  <img src="kitty_intro.gif"
     class="page-gif"
     style="bottom:20px; right:20px;">
</section>

<!-- PAGE 2 GAME -->
<section id="p2">
  <h1>Valentine Memory Match üíû</h1>
  <div class="grid" id="grid"></div>
  <button id="gameNext" disabled onclick="go('SongChoice')">Next üé∂</button>
  <img src="dog_play.gif"
     class="page-gif"
     style="bottom:20px; left:20px;">
</section>

<!-- SONG CHOICE -->
<section id="pSongChoice">
  <h1>Play the Song üíó</h1>
  <button onclick="chooseSong('hug')">If you want to hug me ü§ó</button>
  <button onclick="chooseSong('kiss')">If you want to kiss me üíã</button>
</section>

<!-- MUSIC -->
<section id="p3">
  <h1>A Song That Hugs Your Heart üéµ</h1>
  <div class="music-card">
    <div class="cover" id="cover">
      <img src="music-cover.jpg">
    </div>
    <div class="song-name">Lag Jaa Gale</div>
    <audio id="song" src="song.mp3"></audio>
    <button onclick="toggleSong()">‚ñ∂ Play</button>
  </div>
  <button onclick="go(4)">Next üíñ</button>
  <img src="sakura_branch.gif"
     class="page-gif"
     style="top:18px; left:12px; transform: scaleX(-1);">
</section>

<!-- PHOTOS -->
<section id="p4">
  <h1>Little moments that quietly became precious üíó</h1>
  <div class="slider" id="slider">
    <img src="pic1.jpg" class="slide active">
    <img src="pic2.jpg" class="slide">
    <img src="pic3.jpg" class="slide">
    <img src="pic4.jpg" class="slide">
  </div>
  <button onclick="nextSlide()">Swipe ‚û°</button>
  <button onclick="go(5)">Next ‚ú®</button>
  <img src="sakura_branch.gif"
     class="page-gif"
     style="top:18px; right:12px;">
</section>

<!-- WHY YOU MATTER -->
<section id="p5">
  <h1 id="whyHeading">Why Are You So Special üíó</h1>

  <div class="matter-wrap">

  <div class="matter-card tap-card">
    <div class="card-cover">Tap üíù</div>
    <div class="card-content">
      <h3>Genuine Heart üíû</h3>
      <p>You care in ways that feel real.</p>
    </div>
  </div>

  <div class="matter-card tap-card">
    <div class="card-cover">Tap üíù</div>
    <div class="card-content">
      <h3>Calm Presence üå∏</h3>
      <p>Being with you feels peaceful.</p>
    </div>
  </div>

  <div class="matter-card tap-card">
    <div class="card-cover">Tap üíù</div>
    <div class="card-content">
      <h3>Kind Nature ‚ú®</h3>
      <p>Your kindness is effortless.</p>
    </div>
  </div>

  <div class="matter-card tap-card">
    <div class="card-cover">Tap üíù</div>
    <div class="card-content">
      <h3>Just You üåô</h3>
      <p>Quietly special, always.</p>
    </div>
  </div>
    
  <div class="next-btn-wrap">
  <button onclick="go(6)" style="margin:0 auto; display:inline-block;">
    Next üíå
  </button>
  </div>
    <img src="heart_feelings.gif"
     class="page-gif"
     style="bottom:24px; right:20px;">
</section>

<!-- LETTER -->
<section id="p6">
  <h1>A Valentine Note üíå</h1>
  <div class="envelope">
    <div class="stamp" onclick="openLetter()">Read Me üíó</div>
  </div>

 <div class="letter" id="letter">
  <h3>Hey NODI üíó</h3>

  <p>
    This is our third Valentine‚Äôs Day together, and honestly,
    I never imagined we would come this far ‚Äî especially being miles apart.
    Yet here we are, still choosing each other every single day.
  </p>

  <p>
    Long distance isn‚Äôt easy. There are days when I miss you more
    than I can explain, days when I wish I could just sit beside you
    and talk without a screen between us.
  </p>

  <p>
    But what we share is real. It‚Äôs built on trust, patience,
    and choosing each other even on the difficult days.
  </p>

  <p>
    Happy Valentine‚Äôs Day, NODI.
    Thank you for being my calm, my comfort, and my constant.
  </p>

  <p style="text-align:right;color:#ff5c8a;">
    Your Pritam ‚ù§Ô∏è
  </p>

  <button onclick="resetAll()">‚¨Ö Return to Start</button>
</div>
<img src="bunny_letter.gif"
     class="page-gif"
     style="bottom:20px; left:20px;">
</section>

<script>
/* ---------------- GLOBAL DATA ---------------- */
let selectedSet = "A";
/* -------- STICKER SOUNDS -------- */
const loveSound = new Audio("love_pop.mp3");
const kissSound = new Audio("kiss_pop.mp3");

loveSound.volume = 0.7;
kissSound.volume = 0.7;
/* -------- BURST EFFECT -------- */
function createBurst(x, y, emoji, count = 8) {
  const burst = document.createElement("div");
  burst.className = "burst";
  burst.style.left = x + "px";
  burst.style.top = y + "px";

  for (let i = 0; i < count; i++) {
    const span = document.createElement("span");
    span.textContent = emoji;

    const angle = Math.random() * Math.PI * 2;
    const distance = 40 + Math.random() * 30;

    span.style.setProperty("--x", Math.cos(angle) * distance + "px");
    span.style.setProperty("--y", Math.sin(angle) * distance + "px");

    burst.appendChild(span);
  }

  document.body.appendChild(burst);
  setTimeout(() => burst.remove(), 1000);
}
/* -------- STICKER TAP INTERACTION -------- */
let lastTapTime = 0;

function handleStickerTap(e) {
  const now = Date.now();
  const tapGap = now - lastTapTime;
  lastTapTime = now;

  const rect = e.currentTarget.getBoundingClientRect();
  const x = rect.left + rect.width / 2;
  const y = rect.top + rect.height / 2;

  if (tapGap < 300) {
    // üíã DOUBLE TAP
    kissSound.currentTime = 0;
    kissSound.play();
    createBurst(x, y, "üíã", 10);
  } else {
    // üíó SINGLE TAP (delay to check double tap)
    setTimeout(() => {
      if (Date.now() - lastTapTime >= 300) {
        loveSound.currentTime = 0;
        loveSound.play();
        createBurst(x, y, "üíó", 8);
      }
    }, 300);
  }
}
const imageSets = {
  A: ["pic1.jpg","pic2.jpg","pic3.jpg","pic4.jpg"],
  B: ["pic5.jpg","pic6.jpg","pic7.jpg","pic8.jpg"]
};

const whyContent = {
  A: [
    { title: "Genuine Heart üíû", text: "You care in ways that feel real." },
    { title: "Calm Presence üå∏", text: "Being with you feels peaceful." },
    { title: "Kind Nature ‚ú®", text: "Your kindness is effortless." },
    { title: "Just You üåô", text: "Quietly special, always." }
  ],
  B: [
    { title: "Your Eyes üëÄ", text: "They say everything you don‚Äôt." },
    { title: "Your Hair üí´", text: "Soft, messy, perfectly you." },
    { title: "Your Voice üé∂", text: "Instant calm for my heart." },
    { title: "Your Smile ‚òÄÔ∏è", text: "Makes everything lighter." }
  ]
};

const preloadFiles = [
  "a1.jpg","a2.jpg","b1.jpg","b2.jpg","c1.jpg","c2.jpg","d1.jpg","d2.jpg",
  "pic1.jpg","pic2.jpg","pic3.jpg","pic4.jpg",
  "pic5.jpg","pic6.jpg","pic7.jpg","pic8.jpg",
  "music-cover.jpg","music-cover2.jpg",
  "song.mp3","song2.mp3"
];

/* ---------------- NAVIGATION ---------------- */
function go(n){
  document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
  if(n==="SongChoice") document.getElementById("pSongChoice").classList.add("active");
  else document.getElementById("p"+n).classList.add("active");
}

/* ---------------- FLOATING HEARTS ---------------- */
const heartsBox = document.getElementById("hearts");
setInterval(()=>{
  const h = document.createElement("div");
  h.className = "heart";
  h.textContent = "‚ù§";
  h.style.left = Math.random()*100+"vw";
  h.style.fontSize = 14+Math.random()*16+"px";
  h.style.animationDuration = 6+Math.random()*6+"s";
  heartsBox.appendChild(h);
  setTimeout(()=>h.remove(),12000);
},350);

/* ---------------- MEMORY GAME ---------------- */
const gameImages = ["a1.jpg","a2.jpg","b1.jpg","b2.jpg","c1.jpg","c2.jpg","d1.jpg","d2.jpg"];
const grid = document.getElementById("grid");
const gameNext = document.getElementById("gameNext");
let first=null, lock=false, done=0;

function initGame(){
  grid.innerHTML="";
  done=0; first=null; lock=false;
  gameNext.disabled=true;

  gameImages.sort(()=>Math.random()-0.5).forEach(img=>{
    const c=document.createElement("div");
    c.className="card";
    c.dataset.img=img;
    c.textContent="‚ùì";

    c.onclick=()=>{
      if(lock || c.classList.contains("done") || c.textContent!=="‚ùì") return;

      c.innerHTML=`<img src="${img}" style="width:100%;height:100%;border-radius:10px;">`;

      if(!first){ first=c; }
      else{
        lock=true;
        if(first.dataset.img[0]===c.dataset.img[0]){
          first.classList.add("done");
          c.classList.add("done");
          done+=2;
          if(done===gameImages.length) gameNext.disabled=false;
          first=null; lock=false;
        }else{
          setTimeout(()=>{
            first.textContent="‚ùì";
            c.textContent="‚ùì";
            first=null; lock=false;
          },700);
        }
      }
    };
    grid.appendChild(c);
  });
}

/* ---------------- MUSIC ---------------- */
function toggleSong(){
  const song=document.getElementById("song");
  const cover=document.getElementById("cover");
  if(song.paused){
    song.play();
    cover.classList.add("playing");
  }else{
    song.pause();
    cover.classList.remove("playing");
  }
}

function chooseSong(type){
  const song=document.getElementById("song");
  const img=document.querySelector("#cover img");
  const name=document.querySelector(".song-name");

  if(type==="hug"){
    selectedSet="A";
    song.src="song.mp3";
    img.src="music-cover.jpg";
    name.textContent="Lag Ja Gale";
  }else{
    selectedSet="B";
    song.src="song2.mp3";
    img.src="music-cover2.jpg";
    name.textContent="Zara Zara";
  }
  song.load();
  loadSlider();
  loadWhy();
  updateWhyHeading();
  go(3);
}

/* ---------------- SLIDER ---------------- */
let idx=0;
function loadSlider(){
  const slides=document.querySelectorAll("#slider img");
  slides.forEach((img,i)=>{
    img.src=imageSets[selectedSet][i];
    img.classList.remove("active");
  });
  slides[0].classList.add("active");
  idx=0;
}

function nextSlide(){
  const slides=document.querySelectorAll("#slider img");
  slides[idx].classList.remove("active");
  idx=(idx+1)%slides.length;
  slides[idx].classList.add("active");
}

/* Swipe support */
let startX=0;
const slider=document.getElementById("slider");
if(slider){
  slider.addEventListener("touchstart",e=>startX=e.changedTouches[0].screenX);
  slider.addEventListener("touchend",e=>{
    const endX=e.changedTouches[0].screenX;
    if(Math.abs(startX-endX)>50) nextSlide();
  });
}

/* ---------------- WHY YOU MATTER ---------------- */
function loadWhy(){
  const cards=document.querySelectorAll("#p5 .matter-card");
  cards.forEach((card,i)=>{
    card.querySelector("h3").textContent=whyContent[selectedSet][i].title;
    card.querySelector("p").textContent=whyContent[selectedSet][i].text;
    card.classList.remove("revealed");
  });
}

window.addEventListener("load",()=>{
  document.querySelectorAll(".tap-card").forEach(c=>{
    c.onclick=()=>c.classList.add("revealed");
  });
});
function updateWhyHeading(){
  const heading = document.getElementById("whyHeading");

  if(!heading) return; // safety

  if(selectedSet === "A"){
    heading.textContent = "Why Are You So Special üíó";
  }else{
    heading.textContent = "What I Love Most About You üíó";
  }
}
/* ---------------- LETTER ---------------- */
function openLetter(){
  document.getElementById("letter").style.display="block";
}
function resetAll(){ location.reload(); }

/* ---------------- LOADER ---------------- */
window.addEventListener("load",()=>{
  let loaded=0;
  const bar=document.getElementById("loadingProgress");

  function update(){
    bar.style.width = Math.floor((loaded/preloadFiles.length)*100)+"%";
    if(loaded===preloadFiles.length){
      setTimeout(()=>{
        document.getElementById("loader").style.display="none";
        go(1);
        initGame();
      },800);
    }
  }

  preloadFiles.forEach(src=>{
    if(src.endsWith(".mp3")){
      const a=new Audio();
      a.src=src;
      a.oncanplaythrough=()=>{loaded++;update();};
    }else{
      const i=new Image();
      i.src=src;
      i.onload=()=>{loaded++;update();};
    }
  });
});
/* -------- SINGLE / DOUBLE TAP DETECT -------- */
document.querySelectorAll(".page-gif").forEach(sticker => {
